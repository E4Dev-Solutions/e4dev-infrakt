# Generated by infrakt for app: {{ app_name }}
services:
  {{ app_name }}:
{% if image %}
    image: {{ image }}
{% elif build_context %}
    build: {{ build_context }}
{% endif %}
    container_name: infrakt-{{ app_name }}
    restart: unless-stopped
    env_file:
      - .env
    ports:
      - "127.0.0.1:${{ '{' }}{{ port_var }}:-{{ port }}{{ '}' }}:{{ port }}"
{% if cpu_limit or memory_limit %}
    deploy:
      resources:
        limits:
{% if cpu_limit %}
          cpus: "{{ cpu_limit }}"
{% endif %}
{% if memory_limit %}
          memory: {{ memory_limit }}
{% endif %}
{% endif %}
    networks:
      - infrakt

networks:
  infrakt:
    name: infrakt
    external: true
